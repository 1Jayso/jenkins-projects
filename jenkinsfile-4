pipeline {
  agent {
     docker {
            image 'jenkins-agent'
            args '-v /var/run/docker.sock:/var/run/docker.sock'
        }
  }
  stages {
    // stage('Docker Version') {
    //   steps {
    //     sh 'docker --version'
    //   }
    // }
    stage('Build Docker Image') {
      steps {
            sh '''
                docker build -t ansible ./ansible
                ansible --version
                ansible-playbook --version
                ansible-galaxy --version
                '''
      }
    }
  }
}






// pipeline {
//   agent { dockerfile true }
//   stages {
//     stage('Test') {
//       steps {
//         sh '''
//           ansible --version
//           ansible-playbook --version
//           ansible-galaxy --version
//         '''
//       }
//     }
//   }
// }






// pipeline {
//   agent { dockerfile true }
//   stages {
//     stage('Test') {
//       steps {
//         sh '''
//           node --version
//           git --version
//           curl --version
//         '''
//       }
//     }
//   }
// }